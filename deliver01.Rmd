---
title: "NCED: Part 1"
date: "November 22, 2019"
output: html_document
---

```{r library}
library(knitr)
library(tidyverse)
library(formattable)
library(tidyverse)
library(skimr)
```

```{r child, child=,include=FALSE}

```

##Project Assignment #1					Due: Tuesday, October 8 by 3:00PM
Value: 20% of your project grade (4% of your final grade)
1. Describe your topic. What relationship/phenomenon do you want to study? This should be a research question that has been refined and polished since your initial discussions with me on your topic.
I want to study regional economic development in North Carolina. 

2. Why is this topic interesting and important? What policy makers or ﬁrms would be interested in the topic?

3. What is the population you are studying? What sample are you using? How representative is your sample of the population? What problems might there be with your sample?

4. What is the source of your data? Did you have transform the data to get them into their present form? If so, what did you do?
```{r}
## Data Load ##
census = read_delim(
  "LINC/census-population-and-housing-linc.csv",
  delim = ";")
count = read_csv(
  "LINC/ncccc-nc-complete-count-committee.csv")
education = read_delim(
  "LINC/education.csv",
  delim = ";")
employment = read_delim(
  "LINC/employment-and-income-linc.csv",
  delim = ";")

## format raw col as rows ##
census = census %>% 
  pivot_wider(names_from = Variable,values_from = Value) %>% 
  select(-Year) %>% 
  na.omit() #removes entries with null values

count = count %>% 
  pivot_wider(names_from = Race,values_from = value) %>% 
  select(-main_facet)

education = education %>% 
  pivot_wider(names_from = Variable,values_from = Value) %>% 
  select(-`Area Type`)

employment = employment %>% 
  pivot_wider(names_from = Variable,values_from = Value) %>% 
  select(-Year)

#### join datasets together ####
# cc_table = inner_join(census1,count1,by='Area Name') # join edu and count
# ee_table = inner_join(education1,employment1,by='Area Name')
# full = inner_join(cc_table,ee_table,by='Area Name')

full = inner_join(census,count,by='Area Name') %>% 
  inner_join(education,by='Area Name') %>% 
  inner_join(employment,by='Area Name') %>% 
  mutate(maj_white = as.logical(ifelse(`White alone`>= 67.0,1,0))) %>% 
  # condense all the race variables into one column
  nest(race = c(6:13)) %>% 
  # separate latitude/longitude
  separate(geo_point_2d, sep = ",", into = c("lat","long"),remove = TRUE) %>% 
  mutate(lat = as.numeric(lat),
         long = as.numeric(long)) %>% 
  nest(coordinates = c(lat,long)) %>% 
  select(-Year) %>% 
  # better variable names
  rename(area = 1,
    medi_owner = 2,
    outsiders = 4,
    population = 3,
    sat = 5,
    avg_employ = 8,
    avg_wage = 10,
    employ_resid = 9,
    fam_income = 11,
    college = 6,
    high_sch = 7)
```

5. Describe the characteristics of each variable: units of measurement, whether it is categorical or quantitative, discrete or continuous. If a variable is categorical, provide the coding scheme used to convert it to a dummy variable.

6. What is your dependent variable? Which of your independent variables is the primary focus of the project? (If you do not have a primary independent variable, which independent variable do you suspect will play the largest role in explaining your dependent variable?) Why did you include the other independent variables (these ones that are not the primary focus)? What factors are these variables controlling for?

7. Are there variables that you would like to include but do not have data for? How might those omissions affect your results?

8. Print the first page of your data in the Excel spreadsheet or gretl table. Do not print or submit more than one page because doing so is wasteful. This requirement assures me that you have already collected the data.
```{r head echo=FALSE}
head(full,15)
```